import org.gradle.internal.os.OperatingSystem

task buildDocker(type: Exec) {
    if (OperatingSystem.current().isWindows()) {
        commandLine 'cmd', '/c', 'docker', 'image', 'build', '-f', 'src/main/docker/Dockerfile', '-t', 'praisewm:latest', '.'
    } else {
        commandLine 'docker', 'image', 'build', '-f', 'src/main/docker/Dockerfile', '-t', 'praisewm:latest', '.'
    }
}

buildDocker.dependsOn deploy
